import React from 'react';
import './LoadingScreenSkeleton.css';

interface LoadingScreenSkeletonProps {
  /**
   * КАСТОМНЫЙ РЕНДЕР КОНТЕНТА ДЛЯ ЯЧЕЙКИ
   * Функция которая принимает индекс ячейки (0-34) и возвращает React элемент
   *
   * Пример:
   * renderCellContent={(cellIndex) => <div className="my-pulsing-square" />}
   *
   * Если не передать - ячейки будут пустые (только фон)
   */
  renderCellContent?: (cellIndex: number) => React.ReactNode;
}

/**
 * СКЕЛЕТ КАЛЕНДАРЯ С НАВИГАЦИЕЙ
 *
 * Показывает структуру календаря во время загрузки:
 * ┌────────────────────────────────────────┐
 * │ [<] [>] [Месяц/Год]  (две стрелки)   │ (навигация)
 * │ (gap 8px между ними)                   │
 * ├────────────────────────────────────────┤
 * │ ░░  ░░  ░░  ░░  ░░  ░░  ░░  (сетка)  │
 * │ ░░  ░░  ░░  ░░  ░░  ░░  ░░            │
 * │ ░░  ░░  ░░  ░░  ░░  ░░  ░░            │
 * │ ░░  ░░  ░░  ░░  ░░  ░░  ░░            │
 * │ ░░  ░░  ░░  ░░  ░░  ░░  ░░            │
 * └────────────────────────────────────────┘
 *
 * СОДЕРЖИТ:
 * ✓ Навигацию (две стрелки 30x30 рядом, поле месяца) - мигает
 * ✓ Сетку календаря (7 колонок x 5 рядов = 35 ячеек) - мигает с волновым эффектом
 * ✓ Поддержку кастомного контента внутри каждой ячейки через renderCellContent
 */
export function LoadingScreenSkeleton({ renderCellContent }: LoadingScreenSkeletonProps) {
  return (
    <div className="loading-screen-skeleton">
      {/*
        ═══════════════════════════════════════════
        НАВИГАЦИЯ СВЕРХУ (как в календаре)
        ═══════════════════════════════════════════
        Структура: [<] [>] [Месяц/Год]
        (две стрелки рядом с gap 8px, потом месяц справа)
      */}
      <div className="skeleton-nav-header">
        {/* КОНТЕЙНЕР ДЛЯ ДВУХ СТРЕЛОК (рядом с gap 8px) */}
        <div className="skeleton-nav-arrows">
          {/* ЛЕВАЯ СТРЕЛКА - мигающий квадрат 30x30px */}
          <div className="skeleton-nav-arrow" />

          {/* ПРАВАЯ СТРЕЛКА - мигающий квадрат 30x30px */}
          <div className="skeleton-nav-arrow" />
        </div>

        {/* ПОЛЕ МЕСЯЦА/ГОДА - мигающий прямоугольник, занимает оставшееся место */}
        <div className="skeleton-month-field" />
      </div>

      {/*
        ═══════════════════════════════════════════
        СЕТКА КАЛЕНДАРЯ
        ═══════════════════════════════════════════
        7 колонок (ПН ВТ СР ЧТ ПТ СБ ВС)
        5 рядов (недели)
        35 ячеек всего

        Каждая ячейка мигает с волновым эффектом
        (задержка зависит от позиции)
      */}
      <div className="skeleton-grid">
        {/* Генерируем 35 ячеек (7 колонок x 5 рядов) */}
        {[...Array(35)].map((_, i) => (
          <div key={i} className="skeleton-cell">
            {/*
              КАСТОМНЫЙ КОНТЕНТ ЯЧЕЙКИ
              Если renderCellContent передана - показываем контент
              Иначе - пустая ячейка с фоном (только скелет)

              Индекс i идёт от 0 до 34, можно использовать для
              определения позиции ячейки (день недели, номер строки)
            */}
            {renderCellContent ? renderCellContent(i) : null}
          </div>
        ))}
      </div>
    </div>
  );
}
